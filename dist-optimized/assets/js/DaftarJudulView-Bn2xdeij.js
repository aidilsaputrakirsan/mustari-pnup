import{E as e,F as t,L as n,M as r,N as i,T as a,d as o,g as s,h as c,m as l,s as u,u as d,v as f,w as p,x as m,y as h}from"./vendor-vue-CrbfGyrv.js";import{t as g}from"./index.optimized-DOL2Az7M.js";import{o as _,r as v}from"./supabase-CelTQgPn.js";const y=u(`judul`,()=>{let e=i([]),t=i(!1),n=i(null),r=i(``),a=i(``),o=i(``),s=c(()=>{let t=[...e.value];if(r.value){let e=r.value.toLowerCase();t=t.filter(t=>t.judul.toLowerCase().includes(e)||t.mahasiswa?.nama.toLowerCase().includes(e))}return a.value&&(t=t.filter(e=>e.status===a.value)),o.value&&(t=t.filter(e=>e.bidang===o.value)),t}),l=c(()=>e.value.length),u=c(()=>{let t={};return e.value.forEach(e=>{t[e.status]=(t[e.status]||0)+1}),t});async function d(){t.value=!0,n.value=null;try{let{data:t,error:n}=await v.getAll();if(n)throw Error(n);e.value=t}catch(e){n.value=e.message}finally{t.value=!1}}function f(e){r.value=e}function p(e){a.value=e}function m(e){o.value=e}function h(){r.value=``,a.value=``,o.value=``}return{judulList:e,loading:t,error:n,searchQuery:r,filterStatus:a,filterBidang:o,filteredJudul:s,totalJudul:l,jumlahPerStatus:u,fetchJudul:d,setSearch:f,setFilterStatus:p,setFilterBidang:m,resetFilters:h}});var b={class:`daftar-judul`},x={class:`filter-bar`},S={class:`search-wrapper`},C=[`value`],w=[`value`],T={class:`result-count`},ee={class:`count-number`},E={key:0,class:`loading-list`},D={key:1,class:`judul-list`},O={class:`judul-main`},k={class:`judul-number`},A={class:`judul-content`},j={class:`judul-title`},M={class:`judul-meta`},N={class:`meta-item`},P={class:`meta-item`},F={class:`meta-item`},I={class:`judul-status`},L={class:`judul-dosen`},R={key:0,class:`empty-state`},z={key:2,class:`pagination`},B=[`disabled`],V={class:`page-numbers`},te=[`onClick`],H=[`disabled`],U=10,W=g({__name:`DaftarJudulView`,setup(u){let g=y(),v=i(``),W=i(``),G=i(``),K=i(1),q=[`Diajukan`,`Disetujui`,`Revisi`,`Ditolak`,`Sedang Berjalan`,`Selesai`],J=[`Rekayasa Perangkat Lunak`,`Kecerdasan Buatan`,`Jaringan Komputer`,`Data Science`,`Sistem Informasi`],Y=c(()=>g.loading),X=c(()=>g.filteredJudul),Z=c(()=>Math.ceil(X.value.length/U)),Q=c(()=>{let e=(K.value-1)*U;return X.value.slice(e,e+U)}),ne=c(()=>{let e=[],t=Math.max(1,K.value-2),n=Math.min(Z.value,K.value+2);for(let r=t;r<=n;r++)e.push(r);return e});function re(){g.setSearch(v.value),K.value=1}function $(){g.setFilterStatus(W.value),g.setFilterBidang(G.value),K.value=1}function ie(){v.value=``,W.value=``,G.value=``,g.resetFilters(),K.value=1}function ae(e){return _[e]||`badge-info`}function oe(e){return new Date(e).toLocaleDateString(`id-ID`,{day:`2-digit`,month:`short`,year:`numeric`})}return p(()=>{g.fetchJudul()}),(i,c)=>(a(),h(`div`,b,[s(`div`,x,[s(`div`,S,[c[5]||(c[5]=s(`svg`,{width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`},[s(`circle`,{cx:`11`,cy:`11`,r:`8`}),s(`line`,{x1:`21`,y1:`21`,x2:`16.65`,y2:`16.65`})],-1)),r(s(`input`,{"onUpdate:modelValue":c[0]||(c[0]=e=>v.value=e),type:`text`,class:`form-input search-field`,placeholder:`Cari judul atau nama mahasiswa...`,onInput:re},null,544),[[o,v.value]])]),r(s(`select`,{"onUpdate:modelValue":c[1]||(c[1]=e=>W.value=e),class:`form-input filter-select`,onChange:$},[c[6]||(c[6]=s(`option`,{value:``},`Semua Status`,-1)),(a(),h(l,null,e(q,e=>s(`option`,{key:e,value:e},n(e),9,C)),64))],544),[[d,W.value]]),r(s(`select`,{"onUpdate:modelValue":c[2]||(c[2]=e=>G.value=e),class:`form-input filter-select`,onChange:$},[c[7]||(c[7]=s(`option`,{value:``},`Semua Bidang`,-1)),(a(),h(l,null,e(J,e=>s(`option`,{key:e,value:e},n(e),9,w)),64))],544),[[d,G.value]]),s(`div`,T,[s(`span`,ee,n(X.value.length),1),c[8]||(c[8]=s(`span`,{class:`count-label`},`judul ditemukan`,-1))])]),Y.value?(a(),h(`div`,E,[(a(),h(l,null,e(8,e=>s(`div`,{key:e,class:`skeleton list-skeleton`})),64))])):(a(),h(`div`,D,[(a(!0),h(l,null,e(Q.value,e=>(a(),h(`div`,{key:e.id,class:`judul-card`},[s(`div`,O,[s(`div`,k,`#`+n(e.id),1),s(`div`,A,[s(`h4`,j,n(e.judul),1),s(`div`,M,[s(`span`,N,[c[9]||(c[9]=s(`svg`,{width:`14`,height:`14`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`},[s(`path`,{d:`M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2`}),s(`circle`,{cx:`12`,cy:`7`,r:`4`})],-1)),m(` `+n(e.mahasiswa?.nama||`-`),1)]),s(`span`,P,[c[10]||(c[10]=s(`svg`,{width:`14`,height:`14`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`},[s(`path`,{d:`M4 19.5A2.5 2.5 0 0 1 6.5 17H20`}),s(`path`,{d:`M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z`})],-1)),m(` `+n(e.bidang),1)]),s(`span`,F,[c[11]||(c[11]=s(`svg`,{width:`14`,height:`14`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`},[s(`circle`,{cx:`12`,cy:`12`,r:`10`}),s(`polyline`,{points:`12 6 12 12 16 14`})],-1)),m(` `+n(oe(e.tanggal_ajuan)),1)])])])]),s(`div`,I,[s(`span`,{class:t([`badge`,ae(e.status)])},n(e.status),3),s(`span`,L,`Pembimbing: `+n(e.dosen?.nama||`-`),1)])]))),128)),X.value.length===0&&!Y.value?(a(),h(`div`,R,[c[12]||(c[12]=s(`p`,null,`ðŸ˜” Tidak ada judul yang sesuai filter.`,-1)),s(`button`,{class:`btn-secondary`,onClick:ie},`Reset Filter`)])):f(``,!0)])),Z.value>1?(a(),h(`div`,z,[s(`button`,{class:`page-btn`,disabled:K.value===1,onClick:c[3]||(c[3]=e=>K.value--)},`â† Sebelumnya`,8,B),s(`div`,V,[(a(!0),h(l,null,e(ne.value,e=>(a(),h(`button`,{key:e,class:t([`page-num`,{active:e===K.value}]),onClick:t=>K.value=e},n(e),11,te))),128))]),s(`button`,{class:`page-btn`,disabled:K.value===Z.value,onClick:c[4]||(c[4]=e=>K.value++)},`Selanjutnya â†’`,8,H)])):f(``,!0)]))}},[[`__scopeId`,`data-v-b29927fe`]]);export{W as default};