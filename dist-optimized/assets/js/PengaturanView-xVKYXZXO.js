import{A as e,L as t,M as n,N as r,T as i,b as a,d as o,g as s,h as c,p as l,s as u,v as d,w as f,x as p,y as m}from"./vendor-vue-CrbfGyrv.js";import{t as h}from"./index.optimized-DOL2Az7M.js";import{a as g}from"./supabase-CelTQgPn.js";const _=u(`user`,()=>{let e=r(null),t=r(!1),n=r(null),i=r(!1);async function a(){t.value=!0,n.value=null;try{let{data:t,error:n}=await g.getProfile();if(n)throw Error(n);e.value=t}catch(e){n.value=e.message}finally{t.value=!1}}async function o(r){t.value=!0,n.value=null,i.value=!1;try{let{data:t,error:n}=await g.updateProfile(r);if(n)throw Error(n);e.value=t,i.value=!0,setTimeout(()=>{i.value=!1},3e3)}catch(e){n.value=e.message}finally{t.value=!1}}return{profile:e,loading:t,error:n,saveSuccess:i,fetchProfile:a,updateProfile:o}});var v={class:`pengaturan`},y={class:`settings-container`},b={class:`profile-card card`},x={class:`profile-header`},S={class:`profile-avatar`},C={class:`profile-info`},w={class:`badge badge-info`},T={class:`settings-form card`},E={key:0,class:`success-alert`},D={class:`form-row`},O={class:`form-group`},k={class:`form-group`},A={class:`form-row`},j={class:`form-group`},M={class:`form-group`},N={class:`form-row`},P={class:`form-group`},F={class:`form-group`},I={class:`form-group`},L={class:`form-actions`},R=[`disabled`],z={class:`info-card card`},B={class:`info-list`},V={class:`info-item`},H={class:`info-value`},U=h({__name:`PengaturanView`,setup(u){let h=_(),g=c(()=>h.profile),U=c(()=>h.loading),W=c(()=>h.saveSuccess),G=r({nama:``,nim:``,email:``,telepon:``,prodi:``,angkatan:``,alamat:``}),K=c(()=>g.value?.nama?g.value.nama.split(` `).map(e=>e[0]).join(``).slice(0,2).toUpperCase():`??`);e(g,e=>{e&&(G.value={...e})},{immediate:!0});function q(){h.updateProfile({nama:G.value.nama,email:G.value.email,telepon:G.value.telepon,alamat:G.value.alamat})}function J(){g.value&&(G.value={...g.value})}return f(()=>{h.fetchProfile()}),(e,r)=>(i(),m(`div`,v,[s(`div`,y,[s(`div`,b,[s(`div`,x,[s(`div`,S,[s(`span`,null,t(K.value),1)]),s(`div`,C,[s(`h3`,null,t(g.value?.nama||`Loading...`),1),s(`p`,null,t(g.value?.nim)+` • `+t(g.value?.prodi),1),s(`span`,w,t(g.value?.role),1)])])]),s(`div`,T,[r[15]||(r[15]=s(`h3`,{class:`form-section-title`},`✏️ Edit Profil`,-1)),W.value?(i(),m(`div`,E,` ✅ Profil berhasil diperbarui! `)):d(``,!0),s(`form`,{onSubmit:l(q,[`prevent`]),class:`edit-form`},[s(`div`,D,[s(`div`,O,[r[7]||(r[7]=s(`label`,{class:`form-label`},`Nama Lengkap`,-1)),n(s(`input`,{"onUpdate:modelValue":r[0]||(r[0]=e=>G.value.nama=e),type:`text`,class:`form-input`},null,512),[[o,G.value.nama]])]),s(`div`,k,[r[8]||(r[8]=s(`label`,{class:`form-label`},`NIM`,-1)),n(s(`input`,{"onUpdate:modelValue":r[1]||(r[1]=e=>G.value.nim=e),type:`text`,class:`form-input`,disabled:``},null,512),[[o,G.value.nim]])])]),s(`div`,A,[s(`div`,j,[r[9]||(r[9]=s(`label`,{class:`form-label`},`Email`,-1)),n(s(`input`,{"onUpdate:modelValue":r[2]||(r[2]=e=>G.value.email=e),type:`email`,class:`form-input`},null,512),[[o,G.value.email]])]),s(`div`,M,[r[10]||(r[10]=s(`label`,{class:`form-label`},`No. Telepon`,-1)),n(s(`input`,{"onUpdate:modelValue":r[3]||(r[3]=e=>G.value.telepon=e),type:`tel`,class:`form-input`},null,512),[[o,G.value.telepon]])])]),s(`div`,N,[s(`div`,P,[r[11]||(r[11]=s(`label`,{class:`form-label`},`Program Studi`,-1)),n(s(`input`,{"onUpdate:modelValue":r[4]||(r[4]=e=>G.value.prodi=e),type:`text`,class:`form-input`,disabled:``},null,512),[[o,G.value.prodi]])]),s(`div`,F,[r[12]||(r[12]=s(`label`,{class:`form-label`},`Angkatan`,-1)),n(s(`input`,{"onUpdate:modelValue":r[5]||(r[5]=e=>G.value.angkatan=e),type:`number`,class:`form-input`,disabled:``},null,512),[[o,G.value.angkatan]])])]),s(`div`,I,[r[13]||(r[13]=s(`label`,{class:`form-label`},`Alamat`,-1)),n(s(`textarea`,{"onUpdate:modelValue":r[6]||(r[6]=e=>G.value.alamat=e),class:`form-input`,rows:`3`},null,512),[[o,G.value.alamat]])]),s(`div`,L,[s(`button`,{type:`submit`,class:`btn-primary`,disabled:U.value},[r[14]||(r[14]=s(`svg`,{width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`},[s(`path`,{d:`M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z`}),s(`polyline`,{points:`17 21 17 13 7 13 7 21`}),s(`polyline`,{points:`7 3 7 8 15 8`})],-1)),p(` `+t(U.value?`Menyimpan...`:`Simpan Perubahan`),1)],8,R),s(`button`,{type:`button`,class:`btn-secondary`,onClick:J},` Batal `)])],32)]),s(`div`,z,[r[18]||(r[18]=s(`h3`,{class:`form-section-title`},`ℹ️ Informasi Akun`,-1)),s(`div`,B,[r[17]||(r[17]=a(`<div class="info-item" data-v-35dfe070><span class="info-label" data-v-35dfe070>Dosen Pembimbing</span><span class="info-value" data-v-35dfe070>Dr. Siti Nurhaliza, Ph.D.</span></div><div class="info-item" data-v-35dfe070><span class="info-label" data-v-35dfe070>Status Akun</span><span class="badge badge-success" data-v-35dfe070>Aktif</span></div>`,2)),s(`div`,V,[r[16]||(r[16]=s(`span`,{class:`info-label`},`Terakhir Login`,-1)),s(`span`,H,t(new Date().toLocaleDateString(`id-ID`)),1)])])])])]))}},[[`__scopeId`,`data-v-35dfe070`]]);export{U as default};